<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.depression.dao.CapitalPersonalAssetsMapper">
	<resultMap id="BaseResultMap" type="com.depression.model.CapitalPersonalAssets">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Aug 28 
			10:18:44 CST 2016. -->
		<id column="paid" jdbcType="BIGINT" property="paid" />
		<result column="account" jdbcType="VARCHAR" property="account" />
		<result column="mid" jdbcType="BIGINT" property="mid" />
		<result column="cash_balance" jdbcType="DECIMAL" property="cashBalance" />
		<result column="service_income_amount" jdbcType="DECIMAL"
			property="serviceIncomeAmount" />
		<result column="pay_amount" jdbcType="DECIMAL" property="payAmount" />
		<result column="expense_amount" jdbcType="DECIMAL" property="expenseAmount" />
		<result column="withdraw_amount" jdbcType="DECIMAL" property="withdrawAmount" />
		<result column="is_enable" jdbcType="TINYINT" property="isEnable" />
		<result column="is_delete" jdbcType="TINYINT" property="isDelete" />
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Aug 28 
			10:18:44 CST 2016. -->
		paid, account, mid, cash_balance, service_income_amount, pay_amount,
		expense_amount,
		withdraw_amount, is_enable, is_delete
	</sql>
	<select id="selectByPrimaryKey" parameterType="java.lang.Long"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Aug 28 
			10:18:44 CST 2016. -->
		select
		<include refid="Base_Column_List" />
		from capital_personal_assets
		where paid = #{paid,jdbcType=BIGINT}
		and is_delete = 0
	</select>
	<insert id="insert" keyProperty="paid"
		parameterType="com.depression.model.CapitalPersonalAssets"
		useGeneratedKeys="true">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Aug 28 
			10:18:44 CST 2016. -->
		insert into capital_personal_assets (paid, account, mid,
		cash_balance, service_income_amount, pay_amount,
		expense_amount, withdraw_amount, is_enable,
		is_delete)
		values (#{paid,jdbcType=BIGINT}, #{account,jdbcType=VARCHAR},
		#{mid,jdbcType=BIGINT},
		#{cashBalance,jdbcType=DECIMAL}, #{serviceIncomeAmount,jdbcType=DECIMAL},
		#{payAmount,jdbcType=DECIMAL},
		#{expenseAmount,jdbcType=DECIMAL}, #{withdrawAmount,jdbcType=DECIMAL}, #{isEnable,jdbcType=TINYINT},
		#{isDelete,jdbcType=TINYINT})
	</insert>
	<insert id="insertSelective" keyProperty="paid"
		parameterType="com.depression.model.CapitalPersonalAssets"
		useGeneratedKeys="true">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Aug 28 
			10:18:44 CST 2016. -->
		insert into capital_personal_assets
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="paid != null">
				paid,
			</if>
			<if test="account != null">
				account,
			</if>
			<if test="mid != null">
				mid,
			</if>
			<if test="cashBalance != null">
				cash_balance,
			</if>
			<if test="serviceIncomeAmount != null">
				service_income_amount,
			</if>
			<if test="payAmount != null">
				pay_amount,
			</if>
			<if test="expenseAmount != null">
				expense_amount,
			</if>
			<if test="withdrawAmount != null">
				withdraw_amount,
			</if>
			<if test="isEnable != null">
				is_enable,
			</if>
			<if test="isDelete != null">
				is_delete,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="paid != null">
				#{paid,jdbcType=BIGINT},
			</if>
			<if test="account != null">
				#{account,jdbcType=VARCHAR},
			</if>
			<if test="mid != null">
				#{mid,jdbcType=BIGINT},
			</if>
			<if test="cashBalance != null">
				#{cashBalance,jdbcType=DECIMAL},
			</if>
			<if test="serviceIncomeAmount != null">
				#{serviceIncomeAmount,jdbcType=DECIMAL},
			</if>
			<if test="payAmount != null">
				#{payAmount,jdbcType=DECIMAL},
			</if>
			<if test="expenseAmount != null">
				#{expenseAmount,jdbcType=DECIMAL},
			</if>
			<if test="withdrawAmount != null">
				#{withdrawAmount,jdbcType=DECIMAL},
			</if>
			<if test="isEnable != null">
				#{isEnable,jdbcType=TINYINT},
			</if>
			<if test="isDelete != null">
				#{isDelete,jdbcType=TINYINT},
			</if>
		</trim>
	</insert>
	<select id="selectByPrimaryKeyLock" resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Aug 28 
			10:18:44 CST 2016. -->
		select * from capital_personal_assets
		where paid = #{paid,jdbcType=BIGINT}
		and is_delete = 0
		for update
	</select>
	<select id="selectByPrimaryKeyBulk" resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Aug 28 
			10:18:44 CST 2016. -->
		select * from capital_personal_assets
		where paid in
		<foreach close=")" collection="ids" index="index" item="item"
			open="(" separator=",">
			#{item}
		</foreach>
		and is_delete = 0
	</select>
	<update id="deleteByPrimaryKey" parameterType="java.lang.Long">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Aug 28 
			10:18:44 CST 2016. -->
		update capital_personal_assets
		set is_delete = 1
		where paid = #{paid,jdbcType=BIGINT}
	</update>
	<update id="deleteByPrimaryKeyBulk" parameterType="java.lang.Long">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Aug 28 
			10:18:44 CST 2016. -->
		update capital_personal_assets
		set is_delete = 1
		where paid in
		<foreach close=")" collection="ids" index="index" item="item"
			open="(" separator=",">
			#{item}
		</foreach>
	</update>
	<update id="enableByPrimaryKeyBulk">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Aug 28 
			10:18:44 CST 2016. -->
		update capital_personal_assets
		set is_enable = #{enable}
		where paid in
		<foreach close=")" collection="ids" index="index" item="item"
			open="(" separator=",">
			#{item}
		</foreach>
		and is_delete = 0
	</update>
	<update id="updateByPrimaryKey" parameterType="com.depression.model.CapitalPersonalAssets">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Aug 28 
			10:18:44 CST 2016. -->
		update capital_personal_assets
		set account = #{account,jdbcType=VARCHAR},
		mid = #{mid,jdbcType=BIGINT},
		cash_balance = #{cashBalance,jdbcType=DECIMAL},
		service_income_amount = #{serviceIncomeAmount,jdbcType=DECIMAL},
		pay_amount = #{payAmount,jdbcType=DECIMAL},
		expense_amount = #{expenseAmount,jdbcType=DECIMAL},
		withdraw_amount = #{withdrawAmount,jdbcType=DECIMAL},
		is_enable = #{isEnable,jdbcType=TINYINT}
		where paid = #{paid,jdbcType=BIGINT}
		and is_delete = 0
	</update>
	<update id="updateByPrimaryKeyWithBLOBs" parameterType="com.depression.model.CapitalPersonalAssets">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Aug 28 
			10:18:44 CST 2016. -->
		update capital_personal_assets
		set account = #{account,jdbcType=VARCHAR},
		mid = #{mid,jdbcType=BIGINT},
		cash_balance = #{cashBalance,jdbcType=DECIMAL},
		service_income_amount = #{serviceIncomeAmount,jdbcType=DECIMAL},
		pay_amount = #{payAmount,jdbcType=DECIMAL},
		expense_amount = #{expenseAmount,jdbcType=DECIMAL},
		withdraw_amount = #{withdrawAmount,jdbcType=DECIMAL},
		is_enable = #{isEnable,jdbcType=TINYINT}
		where paid = #{paid,jdbcType=BIGINT}
		and is_delete = 0
	</update>
	<update id="updateByPrimaryKeySelective" parameterType="com.depression.model.CapitalPersonalAssets">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Aug 28 
			10:18:44 CST 2016. -->
		update capital_personal_assets
		<set>
			<if test="account != null">
				account = #{account,jdbcType=VARCHAR},
			</if>
			<if test="mid != null">
				mid = #{mid,jdbcType=BIGINT},
			</if>
			<if test="cashBalance != null">
				cash_balance = #{cashBalance,jdbcType=DECIMAL},
			</if>
			<if test="serviceIncomeAmount != null">
				service_income_amount = #{serviceIncomeAmount,jdbcType=DECIMAL},
			</if>
			<if test="payAmount != null">
				pay_amount = #{payAmount,jdbcType=DECIMAL},
			</if>
			<if test="expenseAmount != null">
				expense_amount = #{expenseAmount,jdbcType=DECIMAL},
			</if>
			<if test="withdrawAmount != null">
				withdraw_amount = #{withdrawAmount,jdbcType=DECIMAL},
			</if>
			<if test="isEnable != null">
				is_enable = #{isEnable,jdbcType=TINYINT},
			</if>
		</set>
		where paid = #{paid,jdbcType=BIGINT}
		and is_delete = 0
	</update>
	<select id="selectSelective" resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Aug 28 
			10:18:44 CST 2016. -->
		select * from capital_personal_assets
		<where>
			is_delete = 0
			<if test="account != null">
				and account = #{account,jdbcType=VARCHAR}
			</if>
			<if test="mid != null">
				and mid = #{mid,jdbcType=BIGINT}
			</if>
			<if test="cashBalance != null">
				and cash_balance = #{cashBalance,jdbcType=DECIMAL}
			</if>
			<if test="serviceIncomeAmount != null">
				and service_income_amount = #{serviceIncomeAmount,jdbcType=DECIMAL}
			</if>
			<if test="payAmount != null">
				and pay_amount = #{payAmount,jdbcType=DECIMAL}
			</if>
			<if test="expenseAmount != null">
				and expense_amount = #{expenseAmount,jdbcType=DECIMAL}
			</if>
			<if test="withdrawAmount != null">
				and withdraw_amount = #{withdrawAmount,jdbcType=DECIMAL}
			</if>
			<if test="isEnable != null">
				and is_enable = #{isEnable,jdbcType=TINYINT}
			</if>
		</where>
	</select>
	<select id="selectSelectiveWithPage" resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Aug 28 
			10:18:44 CST 2016. -->
		select * from capital_personal_assets
		<where>
			is_delete = 0
			<if test="account != null">
				and account = #{account,jdbcType=VARCHAR}
			</if>
			<if test="mid != null">
				and mid = #{mid,jdbcType=BIGINT}
			</if>
			<if test="cashBalance != null">
				and cash_balance = #{cashBalance,jdbcType=DECIMAL}
			</if>
			<if test="serviceIncomeAmount != null">
				and service_income_amount = #{serviceIncomeAmount,jdbcType=DECIMAL}
			</if>
			<if test="payAmount != null">
				and pay_amount = #{payAmount,jdbcType=DECIMAL}
			</if>
			<if test="expenseAmount != null">
				and expense_amount = #{expenseAmount,jdbcType=DECIMAL}
			</if>
			<if test="withdrawAmount != null">
				and withdraw_amount = #{withdrawAmount,jdbcType=DECIMAL}
			</if>
			<if test="isEnable != null">
				and is_enable = #{isEnable,jdbcType=TINYINT}
			</if>
		</where>
		limit #{pageStartNum},#{pageSize}
	</select>
	<select id="countSelective" resultType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Sun Aug 28 
			10:18:44 CST 2016. -->
		select count(*) from capital_personal_assets
		<where>
			is_delete = 0
			<if test="account != null">
				and account = #{account,jdbcType=VARCHAR}
			</if>
			<if test="mid != null">
				and mid = #{mid,jdbcType=BIGINT}
			</if>
			<if test="cashBalance != null">
				and cash_balance = #{cashBalance,jdbcType=DECIMAL}
			</if>
			<if test="serviceIncomeAmount != null">
				and service_income_amount = #{serviceIncomeAmount,jdbcType=DECIMAL}
			</if>
			<if test="payAmount != null">
				and pay_amount = #{payAmount,jdbcType=DECIMAL}
			</if>
			<if test="expenseAmount != null">
				and expense_amount = #{expenseAmount,jdbcType=DECIMAL}
			</if>
			<if test="withdrawAmount != null">
				and withdraw_amount = #{withdrawAmount,jdbcType=DECIMAL}
			</if>
			<if test="isEnable != null">
				and is_enable = #{isEnable,jdbcType=TINYINT}
			</if>
		</where>
	</select>
	<!-- 根据类型查找账户信息：1 用户，2 咨询师 -->
	<select id="selectWithPageByType"
		resultType="com.depression.model.web.dto.CapitalPersonalAssetsDTO">
		select
		cpa.paid,cpa.account,m.nickname,m.reg_time regTime,m.title,m.answer_count answerCount,cpa.cash_balance
		cashBalance,cpa.service_income_amount serviceIncomeAmount
		from
		member m,capital_personal_assets cpa
		where
		m.is_enable = 0 and user_type = #{userType} and m.mid = cpa.mid and cpa.is_enable = 0
		order by m.reg_time desc
		<if test="pageIndex != null and pageSize != null">
			limit #{pageStartNum},#{pageSize}
		</if>
	</select>

	<select id="selectWithPageByTypeCount" resultType="java.lang.Integer">
		select
		count(*)
		from
		member m,capital_personal_assets cpa
		where
		m.is_enable = 0 and user_type = #{userType} and m.mid = cpa.mid and cpa.is_enable
		= 0
	</select>

	<select id="selectCounselorAccounts"
		resultType="com.depression.model.web.dto.CapitalPersonalAssetsDTO">
		select
		m.mid,cpa.paid,cpa.account,m.nickname,m.reg_time regTime,m.title,
		<!-- (select times from service_goods where mid = cpa.mid and times between 
			#{startServiceIncomeAmount} and #{endServiceIncomeAmount}) answerCount, -->
		m.mobile_phone mobilePhone,cpa.cash_balance
		cashBalance,cpa.service_income_amount serviceIncomeAmount
		from
		member m,capital_personal_assets cpa
		where
		m.mid = cpa.mid and m.user_type = #{userType} and m.is_enable = 0 and
		cpa.is_enable = 0
		<if test="mobilePhone != null">
			and m.mobile_phone = #{mobilePhone}
		</if>
		<if test="account != null">
			and cpa.account = #{account}
		</if>
		<if test="nickname != null">
			and m.nickname = #{nickname}
		</if>
		<if test="title != null">
			and m.title = #{title}
		</if>
		<if test="startTime != null and endTime != null">
			and m.reg_time between #{startTime} and #{endTime}
		</if>
		<if test="startAnswerCount != null and endAnswerCount != null">
			<!-- and (select * from service_goods where times between #{startAnswerCount} 
				and #{endAnswerCount}) -->
			and (select sg.times from service_goods sg where sg.mid = cpa.mid and
			m.mid = cpa.mid and times between #{startAnswerCount} and
			#{endAnswerCount})
		</if>
		<if
			test="startServiceIncomeAmount != null and endServiceIncomeAmount != null">
			and cpa.service_income_amount between
			#{startServiceIncomeAmount} and #{endServiceIncomeAmount}
		</if>
		order by m.reg_time desc
		<if test="pageIndex != null and pageSize != null">
			limit #{pageIndex},#{pageSize}
		</if>
	</select>

	<select id="selectCounselorAccountsCount" resultType="java.lang.Integer">
		select
		count(*)
		from
		member m,capital_personal_assets cpa
		where
		m.mid = cpa.mid and m.user_type = #{userType} and m.is_enable = 0 and
		cpa.is_enable = 0
		<if test="mobilePhone != null">
			and m.mobile_phone = #{mobilePhone}
		</if>
		<if test="account != null">
			and cpa.account = #{account}
		</if>
		<if test="nickname != null">
			and m.nickname = #{nickname}
		</if>
		<if test="title != null">
			and m.title = #{title}
		</if>
		<if test="startTime != null and endTime != null">
			and m.reg_time between #{startTime} and #{endTime}
		</if>
		<if test="startAnswerCount != null and endAnswerCount != null">
			<!-- and (select * from service_goods where times between #{startAnswerCount} 
				and #{endAnswerCount}) -->
			and (select sg.times from service_goods sg where sg.mid = cpa.mid and
			m.mid = cpa.mid and times between #{startAnswerCount} and
			#{endAnswerCount})
		</if>
		<if
			test="startServiceIncomeAmount != null and endServiceIncomeAmount != null">
			and cpa.service_income_amount between
			#{startServiceIncomeAmount} and #{endServiceIncomeAmount}
		</if>
	</select>

</mapper>